<div class="comment-section">
  <div class="container">
    <div class="review">
      <h2 class="R-title">Valorations</h2>
      <app-create-valoration [bar]="bar"></app-create-valoration>
      <div class="comment-section">

        <div *ngFor="let number of valorations" class="media media-review">
          <div class="media-user"><img src="{{number.foto}}" alt=""></div>
          <div class="media-body">
            <div class="M-flex">
              <h2 class="title"><span> {{number.nom}} </span>{{number.date}}</h2>
              <div class="rating-row">
                <ul>
                  <lucide-icon *ngIf="number.rate >= 1; else noStr1" name="star" class="starfull"></lucide-icon>
                  <ng-template #noStr1>
                    <lucide-icon name="star" class="star"></lucide-icon>
                  </ng-template>

                  <lucide-icon *ngIf="number.rate >= 2; else noStr2" name="star" class="starfull"></lucide-icon>
                  <ng-template #noStr2>
                    <lucide-icon name="star" class="star"></lucide-icon>
                  </ng-template>

                  <lucide-icon *ngIf="number.rate >= 3; else noStr3" name="star" class="starfull"></lucide-icon>
                  <ng-template #noStr3>
                    <lucide-icon name="star" class="star"></lucide-icon>
                  </ng-template>

                  <lucide-icon *ngIf="number.rate >= 4; else noStr4" name="star" class="starfull"></lucide-icon>
                  <ng-template #noStr4>
                    <lucide-icon name="star" class="star"></lucide-icon>
                  </ng-template>

                  <lucide-icon *ngIf="number.rate >= 5; else noStr5" name="star" class="starfull"></lucide-icon>
                  <ng-template #noStr5>
                    <lucide-icon name="star" class="star"></lucide-icon>
                  </ng-template>
                </ul>
              </div>
            </div>
            <div style="
            display: flex;
            justify-content: space-between;
        ">
              <div class="description">
                <p>{{number.descr}}</p>
              </div>
              <div *ngIf="number.propia">
                <lucide-icon style="cursor: pointer;" name="trash2" (click)="delValoration(number._id)"></lucide-icon>
                <lucide-icon style="cursor: pointer;" name="edit" data-bs-toggle="modal" data-bs-target="#valoModalUpdate" (click)="modalUpdateValoration(number)"></lucide-icon>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="valoModalUpdate" tabindex="-1" aria-labelledby="valoModalLabelUpdate" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="valoModalLabel">Actualizando tu valoración de {{bar.nom}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="customRange2" class="form-label">Valoración</label>
            <input type="range" class="form-range" min="0" max="5" #updateValoRange>
          </div>
          <div class="mb-3">
            <label for="message-text" class="col-form-label">Opinion:</label>
            <textarea class="form-control" id="createValoDescr" #updateValoDescr></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary"  data-bs-dismiss="modal" (click)="updateValoration()">Actualizar</button>

      </div>
    </div>
  </div>
</div>
